<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Pygame</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu' rel='stylesheet' type='text/css'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="js/navbar.js" type="text/javascript"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Pygame</h1>
  <div class="github-fork-ribbon-wrapper left">
    <div class="github-fork-ribbon">
      <a href="https://github.com/stsb11/9-CS-pyGame">Fork me on GitHub</a>
    </div>
  </div>
<div id="stickyribbon">
    <ul>
      <li><a href="1_Lesson.html">Week1</a></li>
      <li><a href="2_Lesson.html">Week2</a></li>
      <li><a href="3_Lesson.html">Week3</a></li>
      <li><a href="4_Lesson.html">Week4</a></li>
      <li><a href="5_Lesson.html">Week5</a></li>
      <li><a href="assessment.html">Assessment</a></li>
    </ul>
  </div>
<div id="outline-container-sec-1" class="outline-2 activity">
<h2 id="sec-1">Stage fright</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-sec-1-1" class="outline-3 save">
<h3 id="sec-1-1">Save It</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Download and save the <a href="./doc/pygame_StagesTemplate.py">Stages Template</a>. Please note this is a different template to all previous lessons.
</li>
<li>You'll also need some assets for your game&#x2026;
</li>
<li>Download this <a href="./doc/Laser_Cannon.ogg">sound file</a> and save it to your Images folder
</li>
<li>Download this <a href="./img/Bourne_Town_Hall.jpg">background image</a> and save it to your Images folder
</li>
<li>Download this <a href="./img/b1.png">sprite file</a> and alo save it to your Images folder
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3 learn">
<h3 id="sec-1-2">Learn It</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>In order for your game to look like a real game we’ll need to have several states for it to exist in.
</li>
<li>The game will have 3 states - splash, playing and game over.
</li>
<li>Splash:
<ul class="org-ul">
<li>Opening image
</li>
<li>Title
</li>
<li>Instructions
</li>
<li>Reset game specific variables e.g. score
</li>
<li>Capture start time – for the timer
</li>
</ul>
</li>

<li>Playing:
<ul class="org-ul">
<li>The actual game we’ve been creating
</li>
</ul>
</li>

<li>Game Over:
<ul class="org-ul">
<li>Displays players results e.g. score / average distance from target
</li>
<li>Option to restart game
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3 build">
<h3 id="sec-1-3">Build It - Setup</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Before the game loop begins we need to setup the font, images and sounds.
</li>
<li>This is done before the game loop as it only needs to be done once.
</li>
</ul>


<div class="figure">
<p><img src="./img/9-1.png" alt="9-1.png" />
</p>
</div>
<ul class="org-ul">
<li>You may need to change the file names for your player, target and background images.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">loads font, images and sounds</span>
<span style="color: #268bd2;">fontName</span> = pygame.font.match_font(<span style="color: #2aa198;">'arial'</span>)
<span style="color: #268bd2;">BGImage</span> = pygame.image.load(<span style="color: #2aa198;">"Images/Bourne_Town_Hall.jpg"</span>)
<span style="color: #268bd2;">player1Image</span> = pygame.image.load(<span style="color: #2aa198;">"Images/crossHair.png"</span>)
<span style="color: #268bd2;">targetImage</span> = pygame.image.load(<span style="color: #2aa198;">"Images/b1.png"</span>)
<span style="color: #268bd2;">gunSound</span> = pygame.mixer.Sound(<span style="color: #2aa198;">"Images/Laser_Cannon.ogg"</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">resize images</span>
<span style="color: #268bd2;">player1ImageWidthHeight</span> = [100, 97]  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">set size for player sprite</span>
<span style="color: #268bd2;">player1Image</span> = pygame.transform.scale(player1Image, player1ImageWidthHeight)  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">modifies size of image</span>
<span style="color: #268bd2;">targetImageWidthHeight</span> = [41, 50]
<span style="color: #268bd2;">targetImage</span> = pygame.transform.scale(targetImage, targetImageWidthHeight)

<span style="color: #268bd2;">targetXY</span> = [500, 500]  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">sets target start position</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2 build">
<h2 id="sec-2">Build It - Splash</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Next we will add the game specific variables to the splash stage so they can be reset at the beginning of each new game. 
</li>
<li>The state change to the playing state is triggered by the left mouse click.
</li>
</ul>

<div class="figure">
<p><img src="./img/9-2.png" alt="9-2.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">set start game variables</span>
<span style="color: #268bd2;">startTime</span> = pygame.time.get_ticks()
<span style="color: #268bd2;">fireLock</span> = 0
<span style="color: #268bd2;">score</span> = 0
<span style="color: #268bd2;">hitList</span> = []
<span style="color: #268bd2;">distanceList</span> = []
</pre>
</div>
<ul class="org-ul">
<li>The hitList is used to score the X and Y coordinates of each successful hit on the target.
</li>
<li>The distanceList is used to store the distance from the centre of the target for each successful hit.
</li>
<li>Both of these are used in the game over state to inform the user of their performance.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2 build">
<h2 id="sec-3">Build It - Playing</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>The playing state contains the game code we have written.
</li>
</ul>

<div class="figure">
<p><img src="./img/9-3.png" alt="9-3.png" />
</p>
</div>
<div class="org-src-container">

<pre class="src src-python">pygame.mouse.set_visible(<span style="color: #268bd2; font-weight: bold;">False</span>)  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">hide mouse cursor</span>
        screen.blit(BGImage, (0, 0))  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">draw background image</span>
        <span style="color: #268bd2;">mousePosition</span> = pygame.mouse.get_pos()
        <span style="color: #268bd2;">target</span> = screen.blit(targetImage, targetXY)
        <span style="color: #268bd2;">player1XY</span> = mousePosition[0] - player1ImageWidthHeight[0] / 2, mousePosition[1] - player1ImageWidthHeight[1] / 2
        <span style="color: #268bd2;">player1</span> = screen.blit(player1Image, player1XY)
        <span style="color: #268bd2;">distance</span> = pythag(player1XY[0], player1XY[1], targetXY[0], targetXY[1])

        <span style="color: #859900; font-weight: bold;">if</span> pygame.mouse.get_pressed()[0] == 1 <span style="color: #859900; font-weight: bold;">and</span> fireLock == 0:  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">player fires</span>
            gunSound.play()
            <span style="color: #268bd2;">fireLock</span> = 1
            <span style="color: #859900; font-weight: bold;">if</span> player1.colliderect(target):  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">when the target is hit</span>
                <span style="color: #268bd2;">targetXY</span>[0] = random.randint(0, SCREENWIDTH - 50)  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">new target X</span>
                <span style="color: #268bd2;">targetXY</span>[1] = random.randint(0, SCREENHEIGHT - 50)  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">new target Y</span>
                <span style="color: #268bd2;">score</span> += 1  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">add to score</span>
                hitList.append([<span style="color: #657b83; font-weight: bold;">int</span>(player1XY[0]), <span style="color: #657b83; font-weight: bold;">int</span>(player1XY[1])])
                distanceList.append(distance)

        <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">draw text to screen</span>
        textDraw(<span style="color: #2aa198;">"distance: "</span> + <span style="color: #657b83; font-weight: bold;">str</span>(<span style="color: #657b83; font-weight: bold;">int</span>(distance)), (SCREENWIDTH / 2 - 100, 10), black)
        textDraw(<span style="color: #2aa198;">"Score: "</span> + <span style="color: #657b83; font-weight: bold;">str</span>(score), (SCREENWIDTH / 2 - 100, 40), black)
        textDraw(<span style="color: #2aa198;">"Time: "</span> + <span style="color: #657b83; font-weight: bold;">str</span>( pygame.time.get_ticks() - startTime), (SCREENWIDTH / 2 - 100, 70), black)

        <span style="color: #859900; font-weight: bold;">if</span> pygame.time.get_ticks() - startTime &gt; 10000:  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">end game after 10 seconds</span>
            <span style="color: #268bd2;">gameState</span> = <span style="color: #2aa198;">"gameOver"</span>
</pre>
</div>
<ul class="org-ul">
<li>The state change to the game over state is triggered by a timer. 
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2 build">
<h2 id="sec-4">Build It - Game Over</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>The game over state displays the players score, average distance of each hit.  The location of each hit and its distance are drawn to the screen.
</li>
</ul>

<div class="figure">
<p><img src="./img/9-4.png" alt="9-4.png" />
</p>
</div>
<div class="org-src-container">

<pre class="src src-python">screen.fill(black)
pygame.mouse.set_visible(<span style="color: #268bd2; font-weight: bold;">True</span>)
<span style="color: #859900; font-weight: bold;">for</span> h <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">range</span>(0, <span style="color: #657b83; font-weight: bold;">len</span>(hitList) - 1):  <span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">for each hit....</span>
    pygame.draw.circle(screen, red, hitList[h], 30)
    textDraw(<span style="color: #657b83; font-weight: bold;">str</span>(<span style="color: #657b83; font-weight: bold;">int</span>(distanceList[h])), (hitList[h][0] + 20, hitList[h][1] + 20), red)
    textDraw(<span style="color: #2aa198;">"Score: "</span> + <span style="color: #657b83; font-weight: bold;">str</span>(score), (10, 40), green)
    <span style="color: #268bd2;">avDistance</span> = <span style="color: #657b83; font-weight: bold;">sum</span>(distanceList) / <span style="color: #657b83; font-weight: bold;">len</span>(distanceList)
    textDraw(<span style="color: #2aa198;">"Average distance: "</span> + <span style="color: #657b83; font-weight: bold;">str</span>(<span style="color: #657b83; font-weight: bold;">int</span>(avDistance)), (10, 100), green)
textDraw(<span style="color: #2aa198;">"Right click to play again"</span>, (400, 400), green)
<span style="color: #859900; font-weight: bold;">if</span> pygame.mouse.get_pressed()[2]:
    <span style="color: #268bd2;">gameState</span> = <span style="color: #2aa198;">"splash"</span>
</pre>
</div>
<ul class="org-ul">
<li>The state change back the splash stage is triggered by a right mouse click.
</li>
</ul>
</div>
<div id="outline-container-sec-4-1" class="outline-3 test">
<h3 id="sec-4-1">Test It</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Try running your program.
</li>
<li>If it doesn't work, some possible explanations are:
<ul class="org-ul">
<li>Images or sound files in the wrong location or the files names do not match.
</li>
<li>Levels of indentation are incorrect.
</li>
</ul>
</li>
<li>The video tutorial below walks you through building the finished game:
</li>
</ul>
<iframe width="650" height="393" src="https://www.youtube.com/embed/xg9UIrildXI" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3 badge">
<h3 id="sec-4-2">Badge It</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><b>Silver:</b> The code uses something called a list to store the players moves. Read the first half of <a href="https://bournetocode.com/projects/8-CS-TextGames/pages/3_2015Lesson.html">these</a> online notes about lists, then write a short piece in a text file (e.g. using Notepad) to explain what a list is.
</li>
<li><b>Gold:</b> Add a background image and some additional text to the splash. screen section of the code, and upload a screenshot of the new splash screen to collect the badge.
</li>
<li><b>Platinum:</b> Modify the game to use are own sprites, backgrounds and sounds, by looking around online. Upload screenshots of your revised game, and the .py file and your new assets to collect the badge. 
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
